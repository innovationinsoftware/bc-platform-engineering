# Lab 5.4 – System Administration Tool Capstone Project

## Overview

Congratulations on completing the foundational labs! You've learned file management, text processing, scripting, user administration, and system configuration. Now it's time to build something practical that brings it all together.

This capstone challenges you to create a useful command-line tool that solves a real system administration problem. Choose a project that matches your comfort level and interests.

### Estimated Time: 3-6 Hours

## Learning Objectives

By completing this capstone, you will:
- Apply skills from previous labs into one cohesive project
- Build a practical command-line tool
- Practice error handling and user-friendly output
- Document your work clearly

## Requirements

Your tool must demonstrate at least **4-5** of the following:

1. **Shell Scripting** - Proper shebang, functions, and error handling (`set -e`, `set -u`)
2. **Argument Parsing** - Accept command-line arguments with validation
3. **File Operations** - Work with files using `find`, `grep`, `awk`, or `sed`
4. **User/Group Management** - Create users, manage groups, or modify permissions
5. **Process Management** - Monitor or control processes
6. **Logging** - Log operations with timestamps
7. **Service Integration** - Work with systemd services
8. **Error Handling** - Graceful failures with helpful messages

## Project Structure

Keep it simple:

```
my-tool/
├── README.md              # How to install and use
├── my-tool.sh             # Main script
└── config.conf            # Configuration (optional)
└── test.sh                # Script for testing (optional)
```

## Project Ideas

### Project 1: `permfix` - Permission Manager ⭐ **BEGINNER**

A simple tool to check and fix common permission problems.

**Core Features:**
- Check if a file/directory has correct permissions
- Fix permissions based on file type (script, config, data file)
- Display current permissions in both symbolic and numeric format
- Backup original permissions before changing
- Simple templates: script (755), config (644), private (600), shared-dir (770)

**Example Usage:**
```bash
permfix check myfile.txt
permfix fix script.sh --template script
permfix show /etc/ssh/sshd_config
```

**Skills Used:** File operations, permissions, argument parsing, error handling

---

### Project 2: `trash` - Safe File Deletion ⭐⭐ **INTERMEDIATE**

A safer alternative to `rm` that allows file recovery.

**Core Features:**
- Move files to `~/.trash/` instead of deleting
- List trashed files with deletion timestamps
- Restore files to original location
- Empty trash with confirmation
- Auto-cleanup of files older than N days

**Example Usage:**
```bash
trash file.txt                    # Move to trash
trash --list                      # Show trashed files
trash --restore file.txt          # Restore file
trash --empty                     # Empty trash
trash --clean-older-than 30       # Remove old files
```

**Skills Used:** File operations, scripting, logging, argument parsing, automation

---

### Project 3: `userkit` - User Onboarding Tool ⭐⭐ **INTERMEDIATE**

Simplify creating users with common configurations.

**Core Features:**
- Create user with home directory and password
- Add user to specified groups
- Set up SSH directory with correct permissions
- Create default files (.bashrc customizations)
- Log all user creation activities

**Example Usage:**
```bash
userkit create alice --groups developers,testers
userkit setup-ssh alice
userkit list --show-groups
```

**Skills Used:** User management, groups, permissions, logging, error handling

---

### Project 4: `syswatch` - System Health Monitor ⭐⭐⭐ **ADVANCED**

Monitor system resources and alert on thresholds.

**Core Features:**
- Check disk usage and warn if above threshold (e.g., 80%)
- Monitor memory usage
- Check if critical services are running
- Log findings with timestamps
- Can be run via cron for continuous monitoring

**Example Usage:**
```bash
syswatch --disk-threshold 80
syswatch --check-service sshd
syswatch --full-report
```

**Skills Used:** Process management, service management, logging, automation, scripting

---

### Project 5: Your Own Idea ⭐-⭐⭐⭐ **ANY LEVEL**

Build something that solves a problem you care about:
- **Log parser**: Extract and summarize error messages
- **Backup tool**: Automated file backups with compression
- **Config manager**: Track changes to important config files
- **Service checker**: Monitor and restart failed services
- **Disk cleanup**: Find and report large/old files

## Tips for Success

- **Start simple**: Get basic functionality working first, then add features
- **Test often**: Run your script after every small change
- **Handle errors**: Check if files exist, validate user input, provide helpful messages
- **Use functions**: Break your code into reusable functions
- **Document**: Add comments and create a README with usage examples
- **Ask for help**: System administrators collaborate and learn from each other

## Example Script Structure

```bash
#!/bin/bash
set -e
set -u

# Configuration
TOOL_NAME="my-tool"
LOG_FILE="/tmp/${TOOL_NAME}.log"

# Functions
log_message() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

show_usage() {
    cat << EOF
Usage: $TOOL_NAME [options] <arguments>

Options:
    --help          Show this help message
    --version       Show version

Examples:
    $TOOL_NAME --help
EOF
}

main() {
    log_message "Starting $TOOL_NAME"
    
    # Your logic here
    
    log_message "Completed successfully"
}

# Run main function
main "$@"
```

## Conclusion

This capstone is your chance to build something practical and useful. You don't need to build everything perfectly—focus on creating a tool that works and solves a real problem.

Remember: Professional administrators build tools by combining simple commands and concepts you've already learned. You've got this!

**Choose a project, start coding, and build something you're proud of!**
