# Editing Files with Vi/Vim

Text editors are essential tools for system administrators who need to modify configuration files, create scripts, and edit system files directly on servers without graphical interfaces.

Vi (and its enhanced version Vim) is a powerful, modal text editor that's available on virtually every Unix-like system. Unlike graphical editors, vi operates in different modes â€” each optimized for specific tasks like navigation, text insertion, or command execution.

Understanding vi is crucial because it's often the only editor available on minimal systems, remote servers, or during system recovery scenarios. Mastering its modal interface and keyboard shortcuts makes you efficient at editing files in any Linux environment.

### Estimated Time: 20 Minutes

## Part 1: Basic Vi Operations

1. Create a practice directory and navigate to it
```
mkdir -p ~/vi_practice && cd ~/vi_practice
```

2. Create your first file with vi
```
vi practice.txt
```

3. Enter Insert mode and add some content. Press `i` to enter Insert mode, then type:
```
Linux System Administration
Configuration files are important
Scripts automate repetitive tasks
```

4. Save and exit: Press `ESC`, then type `:wq` and press Enter

5. Reopen the file and practice navigation in Normal mode
```
vi practice.txt
# Use arrow keys or h(left) j(down) k(up) l(right) to move
# Press 'gg' to go to beginning, 'G' to go to end
# Type ':q' to quit without saving
```

## Part 2: Vi Modes and Editing

1. Create a configuration-style file
```
vi server.conf
```

2. Enter Insert mode (`i`) and add this content:
```
server_name=web01
port=8080
debug=false
max_connections=100
timeout=30
```

3. Practice different insertion modes:
   - Press `ESC` to return to Normal mode
   - Press `a` to append after cursor. Hit `ESC` again.
   - Press `o` to open a new line below and enter Insert mode
   - Add: `log_level=info`

4. Save with `:w` (without quitting)

5. Quit the file with `:q`
   - You can also use `:wq` to save and quit
   - To exit without saving, use `:q!`

## Part 3: Text Manipulation and Search

1. Open server.conf again and practice editing
```
vi server.conf
```

2. Search and replace using the substitute command:
   - Press `ESC` to ensure Normal mode
   - Type `:%s/8080/9090/g` to change port from 8080 to 9090
   - Type `:%s/false/true/g` to change debug to true
   - Note that the `g` is for global, and will substitute all occourances.

3. Practice searching:
   - Type `/debug` to search for "debug"
   - Press `n` for next occurrence, `N` for previous

4. Practice line operations:
   - Position cursor on the timeout line
   - Press `yy` to copy (yank) the line
   - Press `p` to paste below current line
   - Press `dd` to delete a line

## Part 4: Advanced Operations

1. Create a script file
```
vi backup_script.sh
```

2. Add this script content:
```
#!/bin/bash
# System backup script
echo "Starting backup..."
tar -czf /tmp/backup.tar.gz /etc/passwd /etc/hosts
echo "Backup complete"
```

3. Practice visual mode:
   - Position cursor at beginning of "tar" line
   - Press `V` to enter Visual Line mode
   - Use arrow keys to select multiple lines
   - Press `y` to copy selected lines

4. Open multiple files:
```
vi -o server.conf backup_script.sh
# Use Ctrl+w then arrow keys to switch between windows
# Type ':q' in each window to close
```

## Cleanup
```
cd ~
rm -rf ~/vi_practice
```

## Conclusion

In this lab, you mastered the fundamentals of vi/vim, one of the most important tools for Linux system administration:

- **Modal editing**: Understanding Normal, Insert, and Visual modes for efficient text manipulation
- **Navigation**: Moving through files quickly using keyboard shortcuts
- **Text operations**: Copying, pasting, deleting, and searching within files
- **Search and replace**: Using powerful substitute commands to modify content globally
- **File management**: Opening, saving, and working with multiple files simultaneously

Vi skills are essential for every system administrator because you'll frequently need to edit configuration files, scripts, and system files directly on servers. These modal editing concepts transfer to many other tools and make you more efficient at text manipulation tasks.

In the next lab, we'll explore operators and command chaining to build more complex Linux workflows.